mk_add_options MOZILLA_OFFICIAL=1
export MOZILLA_OFFICIAL=1

# Build GeckoView/Firefox for Android:
ac_add_options --enable-application=mobile/android

# With the following java:
ac_add_options --with-java-bin-path="/Library/Java/JavaVirtualMachines/adoptopenjdk-8.jdk/Contents/Home/bin"

# With the following Android NDK:
ac_add_options --with-android-ndk="/Users/akontos/.mozbuild/android-ndk-r17b"

# With the following compiler toolchain:
CC="/Users/akontos/.mozbuild/clang/bin/clang"
CXX="/Users/akontos/.mozbuild/clang/bin/clang++"

ac_add_options --enable-optimize="-O2 -w"


if test `uname -s` = MINGW32_NT-6.2; then
mk_add_options MOZ_MAKE_FLAGS=-j8
else
X=$(($(getconf _NPROCESSORS_ONLN 2>/dev/null || getconf NPROCESSORS_ONLN)*3/2))
mk_add_options MOZ_MAKE_FLAGS=-j${X%.*}
fi
mk_add_options AUTOCLOBBER=1
mk_add_options MOZ_OBJDIR=objdir-current-android

ac_add_options --disable-debug
ac_add_options --disable-rust-debug
ac_add_options --disable-dmd
ac_add_options --disable-crashreporter
ac_add_options --disable-profiling
ac_add_options --disable-signmar
ac_add_options --disable-tests
ac_add_options --disable-verify-mar
ac_add_options --disable-webrender

ac_add_options --enable-ccache=sccache
ac_add_options --enable-release
ac_add_options --enable-rust-simd

ac_add_options --with-app-name=waterfox
ac_add_options --with-app-basename=Waterfox
ac_add_options --with-branding=mobile/android/branding/unofficial
ac_add_options --with-distribution-id=net.waterfox
ac_add_options --without-google-play-services
